# Spring 起步

1. 导入 Spring 的 beans, context, core, expressions 四个jar包
    通过配置 pom, 使用 maven 导入 （导入4.x版本的spring）


```xml
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>4.3.27.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>4.3.27.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>4.3.27.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>4.3.27.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>4.3.27.RELEASE</version>
        </dependency>
    </dependencies>
```

2. 新建一个 Person 对象， 通过 Spring 容器管理

3. 在spring-bean-conf 配置文件中 注册 Person bean

```xml
<!-- 通过容器，使用id 获取注册的这个 bean -->
<bean id="person" class="cn.caozj.spring.bean.Person">
    <!--property 用于设置bean属性 name 字段名 value 是属性值-->
    <property name="lastName" value="czj"></property>
    <property name="age" value="18"></property>
    <property name="gender" value="男"></property>
    <property name="email" value="1205234934@qq.com"></property>
</bean>
```

4. 新建 junit 测试类

在src 同级目录下建一个 test目录

右键 mark as Dir.. Test Resource Root 将文件夹标记为测试目录

引入 JUnit

```xml
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.13</version>
    <!-- 编译依赖范围 一定要改成 compile, 默认是 test, 只在测试阶段有效 -->
    <scope>compile</scope>
</dependency>
```



5. 新建测试类，获取容器中的对象

   ```java
   public class iocTest {
   
       @Test
       public void test(){
           // 根据配置文件获得 容器对象
           ApplicationContext ioc = new ClassPathXmlApplicationContext("spring-bean-conf.xml");
   
           Person czj = (Person)ioc.getBean("personczj");
           System.out.println(czj.toString());
       }
   }
   ```

   

6. 运行测试类 --- 鼠标放到 test 上， 右键 run



小结：

	1. 组件是通过容器创建的，通过 id 获取到组件的对象
 	2. 对象在容器创建时创建的，而不是在获取的时候 （可以在Person 的构造函数中添加 日志观察）
 	3. 同一个 Bean 在组件中是`单实例`的，通过id多次获取的对象是同一个
 	4. 容器创建对象时，配置的属性会通过`set`方法赋值（例如：bean 配置文件中 Person1 的 `age` 属性， 会通过调用对象的 `setAge` 方法设置到对象身上 ）



###### 对象的赋值方式

1. property 

   property 设置的属性会调用 `set` 方法复制

   ```xml
   <property name="lastName" value="czj"></property>
   // lastName --> setLastName
   ```

   

2. constructor-arg

   通过构造函数赋值

   ```xml
   <bean id="person2" class="cn.caozj.spring.bean.Person">
       <constructor-arg name="lastName" value="czj2"></constructor-arg>
       <constructor-arg name="age" value="18"></constructor-arg>
       <constructor-arg name="gender" value="男"></constructor-arg>
       <constructor-arg name="email" value="1205234934@qq.com"></constructor-arg>
   </bean>
   ```

   